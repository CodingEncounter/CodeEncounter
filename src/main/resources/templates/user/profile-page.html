<!--<!DOCTYPE html>-->
<!--<html xmlns="http://www.w3.org/1999/xhtml"-->
<!--      xmlns:th="http://thymeleaf.org">-->
<!--<head th:replace="partials/head :: head('Profile')">-->
<!--    <meta charset="UTF-8">-->
<!--    <title>Title</title>-->
<!--</head>-->
<!--<body>-->
<!--<header th:replace="partials/header :: header"></header>-->
<!--<div class="wknd-profile screen">-->
<!--    <br><br>-->
<!--    <div class="wknd-xf-header">-->
<!--        <div class="wknd-header"><h1 class="title">CodeEncounter</h1></div>-->
<!--    </div>-->

<!--    &lt;!&ndash;    +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++&ndash;&gt;-->
<!--    &lt;!&ndash;    +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++Everything below is the user profile++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++&ndash;&gt;-->
<!--    <div class="web-1920-1 screen">-->
<!--        <div class="flex-row">-->
<!--        &lt;!&ndash;        image&ndash;&gt;-->
<!--        <img class="shutterstock_2028609842" th:src="${user.getProfile_picture_url().toString()}"-->
<!--             alt="Card image cap">-->
<!--&lt;!&ndash;        image&ndash;&gt;-->
<!--        &lt;!&ndash;            content&ndash;&gt;-->
<!--        <div class="flex-row-1 border-1px-dove-gray">-->
<!--            <div class="flex-col">-->
<!--                <div class="full-name monaco-regular-normal-black-30px"><p th:text="${user.firstName}"></p>-->
<!--                    <p th:text="${user.lastName}"></p></div>-->
<!--                <div class="joinedjoin-date monaco-regular-normal-black-30px">-->
<!--                    <p class="text-muted"><i class="far fa-handshake"></i> Joined</p>-->
<!--                    <p th:text="${user.createdDate}"></p>-->
<!--                </div>-->
<!--                <div class="component-1-1">-->
<!--                    <div class="birthdaybirth-date monaco-regular-normal-black-30px">-->
<!--                        <p class="text-muted"><i class="fas fa-birthday-cake"></i> Birthday</p>-->
<!--                        <p th:text="${user.birthday}"></p>-->
<!--                    </div>-->
<!--                </div>-->
<!--                <div class="email-emailcom monaco-regular-normal-black-30px">-->
<!--                    <p class="text-muted"><i class="far fa-envelope"></i> Email</p>-->
<!--                    <p th:text="${user.email}"></p>-->
<!--                </div>-->
<!--                <div class="works-atplace-works monaco-regular-normal-black-30px">-->
<!--                    <p class="text-muted"><i class="far fa-address-card"></i> Works at</p>-->
<!--                    <p th:text="${user.job}"></p>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div class="flex-col-1">-->
<!--                <div class="interestsinterest monaco-regular-normal-black-30px">-->

<!--                    <p th:text="${user.aboutMe}"></p>-->
<!--                </div>-->
<!--                <div class="languagaeslanguages monaco-regular-normal-black-30px">-->
<!--                    <p class="text-muted">Language Proficiency:</p>-->
<!--                    <p th:text="${user.codeLanguages}"></p>-->
<!--                </div>-->
<!--&lt;!&ndash;                content&ndash;&gt;-->
<!--                &lt;!&ndash;button&ndash;&gt;-->
<!--                <form th:if="${sessionUser.getUsername() == user.username}"-->
<!--                      th:action="@{/edit/{username}(username=${#authentication.principal.username})}"-->
<!--                      class="rectangle-2 border-1px-dove-gray" method="get">-->
<!--                    <button type="submit" class="btn btn-dark btn-block" style="font-family: Monaco; font-size: 25px;">Edit Profile</button>-->
<!--                </form>-->
<!--&lt;!&ndash;button&ndash;&gt;-->
<!--            </div>-->
<!--        </div>-->
<!--    </div>-->
<!--</div>-->

<!--    &lt;!&ndash;    +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++Everything above is the user profile++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++&ndash;&gt;-->
<!--    &lt;!&ndash;    +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++&ndash;&gt;-->

<!--&lt;!&ndash;<header th:replace="partials/header :: header"></header>&ndash;&gt;-->
<!--&lt;!&ndash;<div class="wknd-profile screen">&ndash;&gt;-->
<!--&lt;!&ndash;    <br><br>&ndash;&gt;-->
<!--&lt;!&ndash;    <div class="wknd-xf-header">&ndash;&gt;-->
<!--&lt;!&ndash;        <div class="wknd-header"><h1 class="title">CodeEncounter</h1></div>&ndash;&gt;-->
<!--&lt;!&ndash;    </div>&ndash;&gt;-->

<!--&lt;!&ndash;<div th:if="${sessionUser.getUsername() == user.getUsername()}" class="row template">&ndash;&gt;-->
<!--&lt;!&ndash;    <aside class="col-xl-4">&ndash;&gt;-->
<!--&lt;!&ndash;        <div class="container">&ndash;&gt;-->
<!--&lt;!&ndash;            <div class="row p-6" style="background: #E6C25F">&ndash;&gt;-->
<!--&lt;!&ndash;                <div class="col">&ndash;&gt;-->
<!--&lt;!&ndash;                    <img class="card-img-top profile-pic" th:src="${user.getProfile_picture_url().toString()}"&ndash;&gt;-->
<!--&lt;!&ndash;                         alt="Card image cap">&ndash;&gt;-->
<!--&lt;!&ndash;                    <h5 style="font-family: Monaco; font-size: 25px;" class="card-title" th:text="${user.username}"></h5>&ndash;&gt;-->
<!--&lt;!&ndash;                </div>&ndash;&gt;-->
<!--&lt;!&ndash;                <div class="col">&ndash;&gt;-->
<!--&lt;!&ndash;                    <div class="card-text" style="font-family: Monaco; font-size: 25px;">&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                        <p th:text="${user.firstName}"></p>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                        <p th:text="${user.lastName}"></p>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                        <p class="text-muted"><i class="far fa-handshake"></i> Joined</p>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                        <p th:text="${user.createdDate}"></p>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                        <p class="text-muted"><i class="fas fa-birthday-cake"></i> Birthday</p>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;&lt;!&ndash;                        <p th:text="${user.birthday}"></p>&ndash;&gt;&ndash;&gt;-->
<!--&lt;!&ndash;                    </div>&ndash;&gt;-->
<!--&lt;!&ndash;                </div>&ndash;&gt;-->
<!--&lt;!&ndash;                <div class="col">&ndash;&gt;-->
<!--&lt;!&ndash;                    <div class="card-text" style="font-family: Monaco; font-size: 25px;">&ndash;&gt;-->
<!--&lt;!&ndash;                        <p class="text-muted"><i class="far fa-envelope"></i> Email</p>&ndash;&gt;-->
<!--&lt;!&ndash;                        <p th:text="${user.email}"></p>&ndash;&gt;-->
<!--&lt;!&ndash;                        <p class="text-muted"><i class="far fa-address-card"></i> Works at</p>&ndash;&gt;-->
<!--&lt;!&ndash;                        <p th:text="${user.job}"></p>&ndash;&gt;-->
<!--&lt;!&ndash;                    </div>&ndash;&gt;-->
<!--&lt;!&ndash;                    <form th:if="${sessionUser.getUsername() == user.username}"&ndash;&gt;-->
<!--&lt;!&ndash;                          th:action="@{/edit/{username}(username=${#authentication.principal.username})}"&ndash;&gt;-->
<!--&lt;!&ndash;                          class="card-link" method="get">&ndash;&gt;-->
<!--&lt;!&ndash;                        <button type="submit" class="btn btn-dark btn-block" style="font-family: Monaco; font-size: 25px;">Edit Profile</button>&ndash;&gt;-->
<!--&lt;!&ndash;                    </form>&ndash;&gt;-->
<!--&lt;!&ndash;                </div>&ndash;&gt;-->
<!--&lt;!&ndash;                <div class="col-12" style="font-family: Monaco; font-size: 25px;">&ndash;&gt;-->
<!--&lt;!&ndash;                    <p th:text="${user.aboutMe}"></p>&ndash;&gt;-->
<!--&lt;!&ndash;                </div>&ndash;&gt;-->
<!--&lt;!&ndash;                <div class="col-12" style="font-family: Monaco; font-size: 25px;">&ndash;&gt;-->
<!--&lt;!&ndash;                    <p th:text="${user.codeLanguages}"></p>&ndash;&gt;-->
<!--&lt;!&ndash;                </div>&ndash;&gt;-->
<!--&lt;!&ndash;            </div>&ndash;&gt;-->
<!--&lt;!&ndash;        </div>&ndash;&gt;-->
<!--&lt;!&ndash;    </aside>&ndash;&gt;-->

<!--    <main class="col-xl-12">-->
<!--        <div style="width: 100%;">-->
<!--            &lt;!&ndash;            nav tabs&ndash;&gt;-->
<!--            <nav>-->
<!--                <div class="nav nav-tabs" id="nav-tab" role="tablist" style="font-family: Monaco; font-size: 25px;">-->
<!--                    <a class="nav-item nav-link active" id="nav-posts-tab" data-toggle="tab" href="#nav-posts"-->
<!--                       role="tab" aria-controls="nav-posts" aria-selected="true">Post Something</a>-->
<!--                    <a class="nav-item nav-link" id="nav-friends-tab" data-toggle="tab" href="#nav-friends" role="tab"-->
<!--                       aria-controls="nav-friends" aria-selected="false"> View Friends</a>-->
<!--                    <a class="nav-item nav-link" id="nav-photos-tab" data-toggle="tab" href="#nav-photos" role="tab"-->
<!--                       aria-controls="nav-photos" aria-selected="false">View Galleries</a>-->
<!--                    <a class="nav-item nav-link" id="nav-ide-tab" data-toggle="tab" href="#nav-ide"-->
<!--                       role="tab" aria-controls="nav-ide" aria-selected="false">IDE</a>-->
<!--                </div>-->
<!--            </nav>-->
<!--            <div class="tab-content" id="nav-tabContent">-->
<!--                &lt;!&ndash;       tab 1 posts &ndash;&gt;-->
<!--                <div class="tab-pane fade show active" id="nav-posts" role="tabpanel" aria-labelledby="nav-posts-tab">-->

<!--&lt;!&ndash;                    make a post and upload a pic&ndash;&gt;-->
<!--                    <form style="background-color: #faf3dd;"-->
<!--                          th:action="@{/posts/create/{username}(username=${#authentication.principal.username})}"-->
<!--                          th:object="${newPost}" method="POST" class="p-4 m-3">-->
<!--                        <div class="btn-group" role="group" style="width: 100%;">-->
<!--                            <input style="font-family: Monaco; font-size: 25px;" type="text" id="postBody" class="form-control" placeholder="What's new?"-->
<!--                                   th:field="*{body}" required>-->
<!--                            <div id="uploadPhoto">-->
<!--                                <input type="hidden" id="photo" name="gallery_photo" th:field="*{photo_url}">-->
<!--                                <button class="btn btn-dark btn-block m-1" style="font-family: Monaco; font-size: 20px;" id="upload">Upload</button>-->
<!--                            </div>-->
<!--                            <button type="submit" class="btn btn-dark btn-block m-1" style="font-family: Monaco; font-size: 20px;">Submit</button>-->
<!--                        </div>-->
<!--                    </form>-->
<!--&lt;!&ndash;                                        make a post and upload a pic&ndash;&gt;-->

<!--                    <div class="container">-->
<!--                        <div th:each="item : ${posts}">-->
<!--                            <div class="card my-3">-->
<!--                                <div class="card-header container">-->
<!--                                    <div class="row">-->
<!--                                        <div class="col-xl-3">-->
<!--                                            <a th:if="${item.getUser() != user}"-->
<!--                                               th:href="@{/{username}/friend/{friendName} (friendName=${item.getUser().getUsername()}, username=${user.getUsername()})}">-->
<!--                                                <img th:src="${item.getUser().getProfile_picture_url().toString()}"-->
<!--                                                     class="rounded gallery-item-tiny" alt="...">-->
<!--                                            </a>-->
<!--                                            <a th:if="${item.getUser() == user}"-->
<!--                                               th:href="@{/user/{username} (username=${user.getUsername()})}">-->
<!--                                                <img th:src="${item.getUser().getProfile_picture_url().toString()}"-->
<!--                                                     class="rounded gallery-item-tiny" alt="...">-->
<!--                                            </a>-->
<!--                                        </div>-->
<!--                                        <div class="col-xl-9">-->
<!--                                            <br>-->
<!--                                            <h6 th:text="${item.getUser().getUsername()}"></h6>-->
<!--                                            <div>-->
<!--                                                <p th:text="'Uploaded: ' + ${item.getDateString()}"-->
<!--                                                   style="font-size: 100%; white-space: nowrap"></p>-->
<!--                                                <small class="text-muted" th:text="${item.getEditDate()}"></small>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                                <div class="card-body">-->
<!--                                    <div class="mt-2 pt-2">-->
<!--                                        <img th:if="${item.getPhoto_url()} != null" class="gallery-item-post"-->
<!--                                             th:src="${item.getPhoto_url().toString()}" alt="">-->
<!--                                        <p class="card-text m-1" th:text="${item.getBody()}"></p>-->
<!--                                        <br>-->
<!--                                        <div class="mt-2 pt-2" th:if="${item.getUser() == user}">-->
<!--                                            <form style="float: left;"-->
<!--                                                  th:action="@{/posts/edit/{username}/{id} (username=${user.getUsername()}, id=${item.getId()})}"-->
<!--                                                  method="get">-->
<!--                                                <button class="btn btn-dark btn-block" style="font-family: Monaco; font-size: 25px;" type="submit" name="edit">Edit</button>-->
<!--                                            </form>-->
<!--                                            <form style="float: left;"-->
<!--                                                  th:action="@{/posts/delete/{username}/{id} (username=${user.getUsername()}, id = ${item.getId()})}"-->
<!--                                                  th:method="post">-->
<!--                                                <button class="btn btn-dark btn-block" style="font-family: Monaco; font-size: 25px;" type="submit" name="delete">Remove</button>-->
<!--                                            </form>-->
<!--                                            <br>-->
<!--                                        </div>-->
<!--                                        <form class="mt-3 pt-3 border-top"-->
<!--                                              th:action="@{/posts/create/{username}/{postId}/comment (username=${user.getUsername()}, postId=${item.getId()})}"-->
<!--                                              th:object="${newComment}" method="POST">-->
<!--                                            <input id="commentBody" class="form-control" th:field="*{body}" type="text"-->
<!--                                                   placeholder="comment" required>-->
<!--                                            <button type="submit" class="btn btn-dark btn-block" style="font-family: Monaco; font-size: 25px;">Comment</button>-->
<!--                                        </form>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->

<!--                            <div th:each="commentItem : ${comments}">-->
<!--                                <div th:if="${commentItem.getParentPost() == item}">-->
<!--                                    <div class="card m-3">-->
<!--                                        <div class="card-body container">-->
<!--                                            <div class="row">-->
<!--                                                <div class="col-4">-->
<!--                                                    <a th:if="${commentItem.getUser() != user}"-->
<!--                                                       th:href="@{/{username}/friend/{friendName} (friendName=${commentItem.getUser().getUsername()}, username=${user.getUsername()})}">-->
<!--                                                        <img th:src="${commentItem.getUser().getProfile_picture_url().toString()}"-->
<!--                                                             class="rounded gallery-item-teeny-tiny" alt="...">-->
<!--                                                    </a>-->
<!--                                                    <a th:if="${commentItem.getUser() == user}"-->
<!--                                                       th:href="@{/user/{username} (username=${user.getUsername()})}">-->
<!--                                                        <img th:src="${commentItem.getUser().getProfile_picture_url().toString()}"-->
<!--                                                             class="rounded gallery-item-teeny-tiny" alt="...">-->
<!--                                                    </a>-->
<!--                                                </div>-->
<!--                                                <div class="col-8">-->
<!--                                                    <div class="me-auto card-title">-->
<!--                                                        <p th:text="${commentItem.getUser().getUsername()}"></p>-->
<!--                                                    </div>-->
<!--                                                    <p th:text="'Uploaded: ' + ${commentItem.getDateString()}"></p>-->
<!--                                                    <small class="text-muted"-->
<!--                                                           th:text="${commentItem.getEditDate()}"></small>-->
<!--                                                    <br><br>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                            <p th:text="${commentItem.getBody()}"></p>-->
<!--                                            <div class="mt-2 pt-2 border-top">-->
<!--                                                <div th:if="${commentItem.getUser() == user}">-->
<!--                                                    <form style="float: left;"-->
<!--                                                          th:action="@{/comments/edit/{username}/{commentId} (username=${#authentication.principal.username}, commentId=${commentItem.id})}"-->
<!--                                                          th:object="${commentItem}" method="get">-->
<!--                                                        <button type="submit" class="btn btn-secondary">Edit</button>-->
<!--                                                    </form>-->
<!--                                                    <form style="float: right;"-->
<!--                                                          th:action="@{/comments/delete/{username}/{commentId} (username=${user.getUsername()}, commentId=${commentItem.getId()})}"-->
<!--                                                          method="post">-->
<!--                                                        <button type="submit" name="delete" class="btn btn-light">-->
<!--                                                            Remove-->
<!--                                                        </button>-->
<!--                                                    </form>-->
<!--                                                </div>-->
<!--                                            </div>-->
<!--                                        </div>-->
<!--                                    </div>-->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--                &lt;!&ndash;       tab 2 friends&ndash;&gt;-->
<!--                <div class="tab-pane fade" id="nav-friends" role="tabpanel" aria-labelledby="nav-friends-tab">-->
<!--                    <h1 style="font-family: Monaco; font-size: 25px;">Friends</h1>-->
<!--                    <form th:action="@{/users/search/{username} (username=${user.getUsername()})}" method="GET">-->
<!--                        <button type="submit" class="btn btn-dark btn-block" style="font-family: Monaco; font-size: 25px;">Discover</button>-->
<!--                    </form>-->
<!--                    <div style="background-color: #faf3dd;" class="row my-3">-->
<!--                        <div class="col-4 my-2" th:each="item : ${friends}">-->
<!--                            <div th:if="${item.profile_picture_url.isEmpty()}" class="search-card">-->
<!--                                <a th:href="@{/{username}/friend/{friendName} (username=${sessionUser.getUsername()}, friendName=${item.getUsername()})}">-->
<!--                                    <img src="/img/blank-profile-picture.png">-->
<!--                                </a>-->
<!--                                <p class="my-1" th:text="${item.username}"></p>-->
<!--                            </div>-->
<!--                            <div th:if="${!item.profile_picture_url.isEmpty()}" class="search-card">-->
<!--                                <a th:href="@{/{username}/friend/{friendName} (username=${sessionUser.getUsername()}, friendName=${item.getUsername()})}">-->
<!--                                    <img th:src="${item.profile_picture_url.toString()}">-->
<!--                                </a>-->
<!--                                <p class="my-1" th:text="${item.username}"></p>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--                &lt;!&ndash;       tab 3 galleries&ndash;&gt;-->
<!--                <div class="tab-pane fade" id="nav-photos" role="tabpanel" aria-labelledby="nav-photos-tab">-->
<!--                    <h1 style="font-family: Monaco; font-size: 25px;">Photos</h1>-->
<!--                    <div style="background-color: #faf3dd;" class="row my-3">-->
<!--                        <div class="col-6 col-xl-4 my-2" th:each="item : ${galleries}">-->
<!--                            <div th:if="${!item.getPictures().isEmpty()}" id="thumbnail-container" class="search-card">-->
<!--                                <a th:href="@{/{username}/gallery/{id} (username=${user.username}, id=${item.id})}">-->
<!--                                    <img th:src="${item.getPictures().get(0).pictureUrl.toString()}"-->
<!--                                         alt="Gallery Thumbnail Image">-->
<!--                                </a>-->
<!--                                <p class="my-1" th:text="${item.name}"></p>-->
<!--                            </div>-->
<!--                            <div th:if="${item.getPictures().isEmpty()} == true" class="search-card">-->
<!--                                <a th:href="@{/{username}/gallery/{id} (username=${user.username}, id=${item.id})}">-->
<!--                                    <img src="/img/thumbnailDefault.jpg" alt="Gallery Thumbnail Image">-->
<!--                                </a>-->
<!--                                <p class="my-1" th:text="${item.getName()}"></p>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
<!--                </div>-->
<!--                &lt;!&ndash;       tab 4 interests&ndash;&gt;-->
<!--                <div class="tab-pane fade" id="nav-ide" role="tabpanel" aria-labelledby="nav-ide-tab">-->
<!--                    <h1 style="font-family: Monaco; font-size: 25px;">Try something out on our code playground</h1>-->
<!--                    <div style="background-color: #faf3dd;" class="row my-3">-->
<!--                        <div data-pym-src="https://www.jdoodle.com/embed/v0/4Zf6?stdin=0&arg=0&rw=1"></div>-->
<!--                    </div>-->
<!--                </div>-->
<!--            </div>-->
<!--        </div>-->
<!--    </main>-->
<!--            <div class="wknd-container">-->
<!--                <div class="wknd-xf-footer">-->
<!--                    <h1 class="title">CodeEncounter</h1>-->
<!--                    <div class="x2022-code-encounter">Ⓒ 2022, CODEENCOUNTER</div>-->
<!--                </div>-->
<!--            </div>-->
<!--&lt;!&ndash;        </div>&ndash;&gt;-->

<!--</div>-->

<!--<script async src="https://static.codepen.io/assets/embed/ei.js"></script>-->
<!--<script async="" src="https://static.codepen.io/assets/embed/ei.js"></script>-->

<!--<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"-->
<!--        integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"-->
<!--        crossorigin="anonymous"></script>-->
<!--<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"-->
<!--        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"-->
<!--        crossorigin="anonymous"></script>-->
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"-->
<!--        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"-->
<!--        crossorigin="anonymous"></script>-->
<!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"-->
<!--        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"-->
<!--        crossorigin="anonymous"></script>-->
<!--<script src="https://www.jdoodle.com/assets/jdoodle-pym.min.js" type="text/javascript"></script>-->
<!--<script src="/keys.js"></script>-->
<!--<script type="text/javascript" th:src="@{/js/filestack.js}" defer></script>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://thymeleaf.org">
<head th:replace="partials/head :: head('Profile')">
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        (function(t,a,l,k,j,s){
            s=a.createElement('script');s.async=1;s.src="https://cdn.talkjs.com/talk.js";a.head.appendChild(s)
            ;k=t.Promise;t.Talk={v:2,ready:{then:function(f){if(k)return new k(function(r,e){l.push([f,r,e])});l
                        .push([f])},catch:function(){return k&&new k()},c:l}};})(window,document,[]);
    </script>
</head>
<body>
<header th:replace="partials/header :: header"></header>

<div th:if="${sessionUser.getUsername() == user.getUsername()}" class="row template">
    <aside class="col-xl-4">
        <div class="container">
            <div class="row p-3" style="background: white">
                <div class="col">
                    <img class="card-img-top p-3 profile-pic" th:src="${user.getProfile_picture_url().toString()}"
                         alt="Card image cap">
                    <h5 class="card-title" th:text="${user.username}"></h5>
                </div>
                <div class="col">
                    <div class="card-text">
                        <p th:text="${user.firstName}"></p>
                        <p th:text="${user.lastName}"></p>
                        <p class="text-muted"><i class="far fa-handshake"></i> Joined</p>
                        <p th:text="${user.createdDate}"></p>
                        <p class="text-muted"><i class="fas fa-birthday-cake"></i> Birthday</p>
                        <p th:text="${user.birthday}"></p>
                    </div>
                </div>
                <div class="col">
                    <div class="card-text">
                        <p class="text-muted"><i class="far fa-envelope"></i> Email</p>
                        <p th:text="${user.email}"></p>
                        <p class="text-muted"><i class="far fa-address-card"></i> Works at</p>
                        <p th:text="${user.job}"></p>
                    </div>
                    <form th:if="${sessionUser.getUsername() == user.username}"
                          th:action="@{/edit/{username}(username=${#authentication.principal.username})}"
                          class="card-link" method="get">
                        <button type="submit" class="btn btn-secondary">Edit Profile</button>
                    </form>
                </div>
                <div class="col-12">
                    <p th:text="${user.aboutMe}"></p>
                </div>
                <div class="col-12">
                    <p th:text="${user.codeLanguages}"></p>
                </div>
            </div>
        </div>
    </aside>
    <main class="col-xl-8">
        <div style="width: 100%;">
            <!--            nav tabs-->
            <nav>
                <div class="nav nav-tabs" id="nav-tab" role="tablist">

                    <a class="nav-item nav-link active" id="nav-posts-tab" data-toggle="tab" href="#nav-posts" role="tab" aria-controls="nav-posts" aria-selected="true">Posts</a>
                    <a class="nav-item nav-link" id="nav-friends-tab" data-toggle="tab" href="#nav-friends" role="tab" aria-controls="nav-friends" aria-selected="false">Friends</a>
                    <a class="nav-item nav-link" id="nav-photos-tab" data-toggle="tab" href="#nav-photos" role="tab" aria-controls="nav-photos" aria-selected="false">Galleries</a>
                    <a class="nav-item nav-link" id="nav-interest-tab" data-toggle="tab" href="#nav-interests" role="tab" aria-controls="nav-interests" aria-selected="false">Interests</a>
                    <a class="nav-item nav-link" id="nav-chat-tab" data-toggle="tab" href="#nav-chat" role="tab" aria-controls="nav-chat" aria-selected="false">Chat</a>

                    <a class="nav-item nav-link active" id="nav-posts-tab" data-toggle="tab" href="#nav-posts"
                       role="tab" aria-controls="nav-posts" aria-selected="true">Posts</a>
                    <a class="nav-item nav-link" id="nav-friends-tab" data-toggle="tab" href="#nav-friends" role="tab"
                       aria-controls="nav-friends" aria-selected="false">Friends</a>
                    <a class="nav-item nav-link" id="nav-photos-tab" data-toggle="tab" href="#nav-photos" role="tab"
                       aria-controls="nav-photos" aria-selected="false">Galleries</a>
                    <a class="nav-item nav-link" id="nav-ide-tab" data-toggle="tab" href="#nav-ide"
                       role="tab" aria-controls="nav-ide" aria-selected="false">IDE</a>

                </div>
            </nav>
            <div class="tab-content" id="nav-tabContent">
                <!--       tab 1 posts -->
                <div class="tab-pane fade show active" id="nav-posts" role="tabpanel" aria-labelledby="nav-posts-tab">
                    <form style="background-color: #faf3dd;"
                          th:action="@{/posts/create/{username}(username=${#authentication.principal.username})}"
                          th:object="${newPost}" method="POST" class="p-4 m-3">
                        <div class="btn-group" role="group" style="width: 100%;">
                            <input type="text" id="postBody" class="form-control" placeholder="What's up?"
                                   th:field="*{body}" required>
                            <div id="uploadPhoto">
                                <input type="hidden" id="photo" name="gallery_photo" th:field="*{photo_url}">
                                <button class="btn btn-light py-3" id="upload">Upload</button>
                            </div>
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </div>
                    </form>
                    <div class="container">
                        <div th:each="item : ${posts}">
                            <div class="card my-3">
                                <div class="card-header container">
                                    <div class="row">
                                        <div class="col-xl-3">
                                            <a th:if="${item.getUser() != user}"
                                               th:href="@{/{username}/friend/{friendName} (friendName=${item.getUser().getUsername()}, username=${user.getUsername()})}">
                                                <img th:src="${item.getUser().getProfile_picture_url().toString()}"
                                                     class="rounded gallery-item-tiny" alt="...">
                                            </a>
                                            <a th:if="${item.getUser() == user}"
                                               th:href="@{/user/{username} (username=${user.getUsername()})}">
                                                <img th:src="${item.getUser().getProfile_picture_url().toString()}"
                                                     class="rounded gallery-item-tiny" alt="...">
                                            </a>
                                        </div>
                                        <div class="col-xl-9">
                                            <br>
                                            <h6 th:text="${item.getUser().getUsername()}"></h6>
                                            <div>
                                                <p th:text="'Uploaded: ' + ${item.getDateString()}"
                                                   style="font-size: 100%; white-space: nowrap"></p>
                                                <small class="text-muted" th:text="${item.getEditDate()}"></small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div class="mt-2 pt-2">
                                        <img th:if="${item.getPhoto_url()} != null" class="gallery-item-post"
                                             th:src="${item.getPhoto_url().toString()}" alt="">
                                        <p class="card-text m-1" th:text="${item.getBody()}"></p>
                                        <br>
                                        <div class="mt-2 pt-2" th:if="${item.getUser() == user}">
                                            <form style="float: left;"
                                                  th:action="@{/posts/edit/{username}/{id} (username=${user.getUsername()}, id=${item.getId()})}"
                                                  method="get">
                                                <button class="btn btn-secondary m-1" type="submit" name="edit">Edit
                                                </button>
                                            </form>
                                            <!--                                            <a th:href="@{/posts/edit/{username}/{id} (username=${user.getUsername()}, id=${item.getId()})}">Edit post</a>-->
                                            <form style="float: left;"
                                                  th:action="@{/posts/delete/{username}/{id} (username=${user.getUsername()}, id = ${item.getId()})}"
                                                  th:method="post">
                                                <button class="btn btn-light m-1" type="submit" name="delete">Remove
                                                </button>
                                            </form>
                                            <br>
                                        </div>
                                        <form class="mt-3 pt-3 border-top"
                                              th:action="@{/posts/create/{username}/{postId}/comment (username=${user.getUsername()}, postId=${item.getId()})}"
                                              th:object="${newComment}" method="POST">
                                            <input id="commentBody" class="form-control" th:field="*{body}" type="text"
                                                   placeholder="comment" required>
                                            <button type="submit" class="btn btn-primary m-2">Comment</button>
                                        </form>
                                    </div>
                                </div>
                            </div>

                            <div th:each="commentItem : ${comments}">
                                <div th:if="${commentItem.getParentPost() == item}">
                                    <div class="card m-3">
                                        <div class="card-body container">
                                            <div class="row">
                                                <div class="col-4">
                                                    <a th:if="${commentItem.getUser() != user}"
                                                       th:href="@{/{username}/friend/{friendName} (friendName=${commentItem.getUser().getUsername()}, username=${user.getUsername()})}">
                                                        <img th:src="${commentItem.getUser().getProfile_picture_url().toString()}"
                                                             class="rounded gallery-item-teeny-tiny" alt="...">
                                                    </a>
                                                    <a th:if="${commentItem.getUser() == user}"
                                                       th:href="@{/user/{username} (username=${user.getUsername()})}">
                                                        <img th:src="${commentItem.getUser().getProfile_picture_url().toString()}"
                                                             class="rounded gallery-item-teeny-tiny" alt="...">
                                                    </a>
                                                </div>
                                                <div class="col-8">
                                                    <div class="me-auto card-title">
                                                        <p th:text="${commentItem.getUser().getUsername()}"></p>
                                                    </div>
                                                    <p th:text="'Uploaded: ' + ${commentItem.getDateString()}"></p>
                                                    <small class="text-muted"
                                                           th:text="${commentItem.getEditDate()}"></small>
                                                    <br><br>
                                                </div>
                                            </div>
                                            <p th:text="${commentItem.getBody()}"></p>
                                            <div class="mt-2 pt-2 border-top">
                                                <div th:if="${commentItem.getUser() == user}">
                                                    <form style="float: left;"
                                                          th:action="@{/comments/edit/{username}/{commentId} (username=${#authentication.principal.username}, commentId=${commentItem.id})}"
                                                          th:object="${commentItem}" method="get">
                                                        <button type="submit" class="btn btn-secondary">Edit</button>
                                                    </form>
                                                    <form style="float: right;"
                                                          th:action="@{/comments/delete/{username}/{commentId} (username=${user.getUsername()}, commentId=${commentItem.getId()})}"
                                                          method="post">
                                                        <button type="submit" name="delete" class="btn btn-light">
                                                            Remove
                                                        </button>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--       tab 2 friends-->
                <div class="tab-pane fade" id="nav-friends" role="tabpanel" aria-labelledby="nav-friends-tab">
                    <h1>Friends</h1>
                    <form th:action="@{/users/search/{username} (username=${user.getUsername()})}" method="GET">
                        <button type="submit" class="btn btn-primary">Discover</button>
                    </form>
                    <div style="background-color: #faf3dd;" class="row my-3">
                        <div class="col-4 my-2" th:each="item : ${friends}">
                            <div th:if="${item.profile_picture_url.isEmpty()}" class="search-card">
                                <a th:href="@{/{username}/friend/{friendName} (username=${sessionUser.getUsername()}, friendName=${item.getUsername()})}">
                                    <img src="/img/blank-profile-picture.png">
                                </a>
                                <p class="my-1" th:text="${item.username}"></p>
                            </div>
                            <div th:if="${!item.profile_picture_url.isEmpty()}" class="search-card">
                                <a th:href="@{/{username}/friend/{friendName} (username=${sessionUser.getUsername()}, friendName=${item.getUsername()})}">
                                    <img th:src="${item.profile_picture_url.toString()}">
                                </a>
                                <p class="my-1" th:text="${item.username}"></p>
                            </div>
                        </div>
                    </div>
                </div>
                <!--       tab 3 galleries-->
                <div class="tab-pane fade" id="nav-photos" role="tabpanel" aria-labelledby="nav-photos-tab">
                    <h1>Photos</h1>
                    <div style="background-color: #faf3dd;" class="row my-3">
                        <div class="col-6 col-xl-4 my-2" th:each="item : ${galleries}">
                            <div th:if="${!item.getPictures().isEmpty()}" id="thumbnail-container" class="search-card">
                                <!--                                <a class="modal-link" href="#exampleModal" data-toggle="modal" th:data-id="${item.getId()}">-->
                                <a th:href="@{/{username}/gallery/{id} (username=${user.username}, id=${item.id})}">
                                    <img th:src="${item.getPictures().get(0).pictureUrl.toString()}"
                                         alt="Gallery Thumbnail Image">
                                </a>
                                <p class="my-1" th:text="${item.name}"></p>
                            </div>
                            <div th:if="${item.getPictures().isEmpty()} == true" class="search-card">
                                <a th:href="@{/{username}/gallery/{id} (username=${user.username}, id=${item.id})}">
                                    <img src="/img/thumbnailDefault.jpg" alt="Gallery Thumbnail Image">
                                </a>
                                <p class="my-1" th:text="${item.getName()}"></p>
                            </div>
                        </div>
                    </div>
                </div>
                <!--       tab 4 interests-->
                <div class="tab-pane fade" id="nav-ide" role="tabpanel" aria-labelledby="nav-ide-tab">
                    <h1>Code Playground</h1>
                    <div style="background-color: #faf3dd;" class="row my-3">
                        <!--                        <div class="col-6 col-xl-4 my-2" th:each="item : ${interest}">-->
                        <!--                            <div class="col-md-10 offset-md-1">-->

                        <!--                                <div id="profile-img-status"></div>-->

                        <!--                                <div id="interestDiv">-->


                        <!--                                    <div class="cp_embed_wrapper">-->
                        <!--                                        <iframe allowfullscreen="true" allowpaymentrequest="true"-->
                        <!--                                                allowtransparency="true" class="cp_embed_iframe " frameborder="0"-->
                        <!--                                                height="800" width="100%" name="cp_embed_1" scrolling="no"-->
                        <!--                                                src="https://codepen.io/embed/prefill"-->
                        <!--                                                style="width: 100%; overflow:hidden; display:block;"-->
                        <!--                                                title="CodePen Embed">-->

                        <!--                                        </iframe>-->
                        <!--                                        <form class="cp_embed_form" style="display: none;" method="post"-->
                        <!--                                              action="https://codepen.io/embed/prefill" target="cp_embed_1">-->
                        <!--                                            <input type="hidden" name="height" value="800">-->
                        <!--                                            <input type="hidden" name="theme-id" value="1">-->
                        <!--                                            <input type="hidden" name="default-tab" value="html,result">-->
                        <!--                                            <input type="hidden" name="editable" value="true">-->
                        <!--                                            <input type="hidden" name="user" value="anon">-->
                        <!--                                            <input type="hidden" name="name" value="cp_embed_1">-->
                        <!--                                            <input type="hidden" name="data"-->
                        <!--                                                   value="{&quot;html&quot;:&quot;\t<section class=\&quot;p-0 bg-img cover-background\&quot; style=\&quot;background-image: url(https://bootdey.com/img/Content/bg1.jpg);\&quot;>\n-->
                        <!--                                                   <div class=\&quot;container-fluid d-flex flex-column\&quot;>\n-->
                        <!--                                                   <div class=\&quot;row align-items-center justify-content-center min-vh-100\&quot;>\n-->
                        <!--                                                   <div class=\&quot;col-md-9 col-lg-6 my-5\&quot;>\n-->
                        <!--                                                   <div class=\&quot;text-center error-page\&quot;>\n-->
                        <!--                                                   <h1 class=\&quot;mb-0 text-secondary\&quot;>404</h1>\n-->
                        <!--                                                   <h2 class=\&quot;mb-4 text-white\&quot;>Sorry, something went wrong!</h2>\n-->
                        <!--                                                   <p class=\&quot;w-sm-80 mx-auto mb-4 text-white\&quot;>This page is incidentally inaccessible because of support. We will back very before long much obliged for your understanding</p>\n-->
                        <!--                                                   <div>\n-->
                        <!--                                                   <a href=\&quot;#\&quot; class=\&quot;btn btn-info btn-lg me-sm-2 mb-2 mb-sm-0\&quot;>Return Home</a>\n-->
                        <!--                                                   </div>\n-->
                        <!--                                                   </div>\n-->
                        <!--                                                   </div>\n-->
                        <!--                                                   </div>\n-->
                        <!--                                                   </div>\n-->
                        <!--                                                   </section>\n&quot;,&quot;css&quot;:&quot;\tbody{margin-top:20px;}\n.cover-background {\n-->
                        <!--                                                   position: relative !important;\nbackground-size: cover !important;\noverflow: hidden !important;\nbackground-position: center !important;\nbackground-repeat: no-repeat !important;\n}\n.p-0 {\n-->
                        <!--                                                   padding: 0!important;\n}\nsection {\n    padding: 120px 0;\noverflow: hidden;\nbackground: #fff;\n}\n\n.error-page {\n    background-color: #BABABA4A;\n    -webkit-backdrop-filter: blur(9px);\nbackdrop-filter: blur(15px);\nborder: 1px solid rgba(234,234,235,0.2);\npadding: 80px 20px;\n}\n.text-center {\n-->
                        <!--                                                   text-align: center!important;\n}\n.error-page h1 {\n    font-size: 200px;\nline-height: 1;\nfont-weight: 600;\n}\n.text-secondary {\n    color: #15395A !important;\n}\n.mb-4 {\n    margin-bottom: 1.5rem!important;\n}\n&quot;,&quot;js&quot;:&quot;\t\n&quot;}">-->
                        <!--                                        </form>-->
                        <!--                                    </div>-->
                        <div data-pym-src="https://www.jdoodle.com/embed/v0/4Zf6?stdin=0&arg=0&rw=1"></div>


                        <!--                                </div>-->
                        <!--                            </div>-->
                        <!--                        </div>-->
                    </div>
                </div>
            </div>

            <!------- Tab 5 Chat  ------->
            <div class="tab-pane fade show active" id="nav-chat" role="tabpanel" aria-labelledby="nav-chat-tab">
                <div id="talks-container" style="width: 90%; margin: 30px; height: 500px">
                    <script>
                        import Talk from 'talkjs';

                        const getAgent = async () => {
                            const response = await fetch('http://localhost:8081/getUser?userId=1');
                            const data = await response.json();
                            let agent = new Talk.User({
                                id: data.id,
                                name: data.name,
                                photoUrl: data.dp,
                                email: data.email,
                                role: data.role
                            });
                            return agent;
                        }
                        const getUser = async () => {
                            const response = await fetch('http://localhost:8081/getUser?userId=6');
                            const data = await response.json();
                            let user = new Talk.User({
                                id: data.id,
                                name: data.name,
                                photoUrl: data.dp,
                                email: data.email,
                                role: data.role
                            });
                            return user;
                        }
                        (
                            async function() {
                                await Talk.ready;
                                let agent = await getAgent();
                                let user = await getUser();

                                const session = new Talk.Session({
                                    appId: 'tOGmRmb6',
                                    me: user,
                                });
                                var conversation = session.getOrCreateConversation(Talk.oneOnOneId(user, agent));

                                conversation.setAttributes({
                                    welcomeMessages: ["You can start typing your message here and one of our agents will be with you shortly.", "Please do not divulge any of your personal information."]
                                })
                                conversation.setParticipant(user);
                                conversation.setParticipant(agent);

                                var chatbox = window.talkSession.createChatbox();
                                chatbox.select(conversation);
                                chatbox.mount(document.getElementById('talks-container'));
                            }());
                    </script>
                    <!--                     minified snippet to load TalkJS without delaying your page-->
                    <!--                    <script>-->
                    <!--                        (function(t,a,l,k,j,s){-->
                    <!--                            s=a.createElement('script');s.async=1;s.src="https://cdn.talkjs.com/talk.js";a.head.appendChild(s)-->
                    <!--                            ;k=t.Promise;t.Talk={v:3,ready:{then:function(f){if(k)return new k(function(r,e){l.push([f,r,e])});l-->
                    <!--                                        .push([f])},catch:function(){return k&&new k()},c:l}};})(window,document,[]);-->
                    <!--                    </script>-->

                    <!--                     container element in which TalkJS will display a chat UI -->

                </div>
                <!--                </div>-->
                <!--        </div>-->
                <!--        </div>-->
                <!--    </main>-->

            </div>
    </main>

    <footer class="col-xl-12">
        CodeEncounter23
    </footer>

    <!--</div>-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</div>

<script async src="https://static.codepen.io/assets/embed/ei.js"></script>
<script async="" src="https://static.codepen.io/assets/embed/ei.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
        crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
<script src="https://www.jdoodle.com/assets/jdoodle-pym.min.js" type="text/javascript"></script>

<script src="/keys.js"></script>
<script src="../../../webapp/js/UserChat.js"></script>
<script type="text/javascript" th:src="@{/js/filestack.js}" defer></script>
</body>
</html>